{"version":3,"sources":["../../src/logout-processor/logout-processor.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAgB,QAAQ,CAAC;AACtC,OAAO,gBAAgB,MAAM,0CAA0C,CAAC;AACxE,OAAO,UAAU,MAAY,4BAA4B,CAAC;AAE1D,MAAM,CAAC,OAAO;IAAd,iBAqBC;IApBC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QACjC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,SAAS,CAC7C,UAAA,IAAI;YACF,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACtB,CAAC,CAAC,MAAM,CAAC,KAAI,EAAE,EAAE,IAAI,MAAA,EAAC,CAAC,CAAC;YACxB,WAAW;YACX,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,KAAI,EAAE,QAAQ,CAAC,CAAC;YAChC,KAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACxB,OAAO,CAAC,IAAI,CAAC,CAAC;QAChB,CAAC,EACD,UAAA,GAAG;YACD,WAAW;YACX,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,KAAI,EAAE,QAAQ,CAAC,CAAC;YAChC,KAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACxB,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CACF,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC","file":"logout-processor.js","sourceRoot":"","sourcesContent":["import * as _           from \"lodash\";\r\nimport autoLogoutSetter from '../auto-logout-setter/auto-logout-setter';\r\nimport roleSetter       from '../role-setter/role-setter';\r\n\r\nexport default function() {\r\n  return new Promise((resolve, reject) => {\r\n    this.http.get(this.configs.logoutUrl).subscribe(\r\n      data => {\r\n        this.auth = data.auth;\r\n        _.extend(this, { data});\r\n        // clean up\r\n        autoLogoutSetter('remove');\r\n        roleSetter.call(this, 'noAuth');\r\n        this.http.removeToken();\r\n        resolve(data);\r\n      },\r\n      err => {\r\n        // clean up\r\n        autoLogoutSetter('remove');\r\n        roleSetter.call(this, 'noAuth');\r\n        this.http.removeToken();\r\n        return reject(err);\r\n      }\r\n    );\r\n  });\r\n}\r\n"]}