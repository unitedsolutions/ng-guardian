{"version":3,"sources":["../../../src/role-setter/routes-filterer/routes-filterer.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAM,QAAQ,CAAC;AAE5B,MAAM,CAAC,OAAO,yBAAyB,MAAM,EAAE,cAAc,EAAE,IAAI,EAAE,KAAU,EAAE,SAAc;IAA1B,sBAAA,EAAA,UAAU;IAAE,0BAAA,EAAA,cAAc;IAC7F,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,UAAA,aAAa;QAC7B,IAAA,yBAAI,EAAE,iCAAQ,EAAE,gCAAiB,CAAkB;QACxD,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,EAAC,IAAI,MAAA,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAExC,IAAG,KAAK,EAAE;YACR,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;YAE3C,IAAG,QAAQ,EAAE;gBACX,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC9C,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,EAAC,QAAQ,UAAA,EAAC,CAAC,CAAC;aAC5B;YAED,IAAG,QAAQ,EAAE;gBACX,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC3B,QAAQ,CAAC,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;gBAC1E,KAAK,GAAG,EAAE,CAAC;aACZ;YAED,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC1B;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,SAAS,CAAC;AACnB,CAAC","file":"routes-filterer.js","sourceRoot":"","sourcesContent":["import * as _ from 'lodash';\r\n\r\nexport default function routesFilterer(routes, approvedRoutes, role, paths = [], newRoutes = []) {\r\n  _.each(approvedRoutes, approvedRoute => {\r\n    let {path, children, default: _default} = approvedRoute;\r\n    let route = _.filter(routes, {path})[0];\r\n    \r\n    if(route) {\r\n      let newRoute = _.omit(route, ['children']);\r\n      \r\n      if(_default) {\r\n        _default = [''].concat(paths, path).join('/');\r\n        _.extend(role, {_default});\r\n      }\r\n      \r\n      if(children) {\r\n        paths = paths.concat(path);\r\n        newRoute.children = routesFilterer(route.children, children, role, paths);\r\n        paths = [];\r\n      }\r\n      \r\n      newRoutes.push(newRoute);\r\n    }\r\n  });\r\n    \r\n  return newRoutes;\r\n}\r\n"]}