{"version":3,"sources":["../../src/login-processor/login-processor.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAgB,QAAQ,CAAC;AACtC,OAAO,gBAAgB,MAAM,0CAA0C,CAAC;AACxE,OAAO,UAAU,MAAY,4BAA4B,CAAC;AAE1D,MAAM,CAAC,OAAO,WAAU,WAAW;IAAnC,iBAYC;IAXC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QACjC,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC,SAAS,CAAC,UAAA,IAAI;YAC/D,IAAI,MAAM,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC7B,IAAA,yBAAsC,EAArC,kBAAM,EAAE,gBAAK,CAAyB;YAC3C,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAC5B,CAAC,CAAC,MAAM,CAAC,KAAI,EAAE,EAAC,IAAI,MAAA,EAAC,CAAC,CAAC;YACvB,UAAU,CAAC,IAAI,CAAC,KAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;YAC5C,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC1B,CAAC,EAAE,UAAA,GAAG,IAAI,OAAA,MAAM,CAAC,GAAG,CAAC,EAAX,CAAW,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;AACL,CAAC","file":"login-processor.js","sourceRoot":"","sourcesContent":["import * as _           from 'lodash';\r\nimport autoLogoutSetter from '../auto-logout-setter/auto-logout-setter';\r\nimport roleSetter       from '../role-setter/role-setter';\r\n\r\nexport default function(credentials) {\r\n  return new Promise((resolve, reject) => {\r\n    this.http.post(this.configs.loginUrl, credentials).subscribe(data => {\r\n      let fields = ['routes', 'token'];\r\n      let {routes, token} = _.pick(data, fields);\r\n      this.http.setToken(token);\r\n      data = _.omit(data, fields);\r\n      _.extend(this, {data});\r\n      roleSetter.call(this, 'auth', true, routes);\r\n      autoLogoutSetter('add');         \r\n    }, err => reject(err));\r\n  });\r\n}\r\n"]}